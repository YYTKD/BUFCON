<!DOCTYPE html>
<html lang="ja">
<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,300,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Zen+Kaku+Gothic+New&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JET-PALET</title>
    <style>

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/*グローバルカラーとサイズ */
:root {
    /* カラーパレット */
    --primary-color-1: #0d0d0d;
    --primary-color-2: #3d3d3d;
    --primary-color-3: #9d9d9d;
    --secondary-color-1: #f7f8fb;
    --secondary-color-2: #c7c8cb;
    --btn-color: #5c59ff;
    --pickup-color: #ff8e3c;
    --success-color: #48c229;
    --danger-color: #d9376e;
    --bg-color: #eff0f3;
}

/*基本設定・デフォルト使用削除*/
input {
    border: none;
}
        
input[type="text"], 
select,
input[type="number"] {
    padding: 6px 8px;
    border-radius: 4px;
    border: 1px solid var(--secondary-color-2);
    background: white;
    font-size: 14px;
    height: 40px;
    width: 100%;
}

button {
    background-color: transparent;
    border: none;
    cursor: pointer;
    outline: none;
    padding: 0;
    -webkit-appearance: none;
    -moz-appearance: none;
}

details summary::marker {
    content: '';
}

.material-symbols-rounded {
    user-select: none;
}

body {
    font-family: 'Kosugi Maru', system-ui, sans-serif;
    background: var(--bg-color);
    padding: 0;
    box-sizing: border-box !important;
}

.context-menu {
    position: absolute;
    background: rgba(13,13,13,0.9);
    box-shadow: 0 8px 24px rgba(0,0,0,0.18);
    border-radius: 10px;
    padding: 4px 0;
    z-index: 1200;
}

.context-menu.hidden {
    display: none;
}

.context-menu-item {
    width: 100%;
    text-align: left;
    padding: 10px 16px;
    background: transparent;
    border: none;
    font-size: 14px;
    color: var(--secondary-color-1);
    cursor: pointer;
}

.context-menu-item:hover {
    background: rgba(100,100,100,0.8);
}

.context-menu-separator {
    height: 1px;
    background: var(--bg-color);
    margin: 4px 0;
}

.material-symbols-rounded {
    font-size: 24px;
    font-weight: 400;
    flex-shrink: 0;
    align-items: center;
    justify-self: center;
    overflow: visible;
}

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
    -moz-appearance:textfield;
}

/* ========================================
   レイアウト・コンテナ
   ======================================== */

/* メインコンテナ */
.container {
    padding: 8px;
    background: var(--bg-color);
    overflow: hidden;
}

/* コンテンツエリア */
.content {
    display: flex;
    flex-wrap: wrap;
    margin-top: 40px;
    gap: 16px;

}

/* ========================================
   共通パーツ
   ========================================*/

/* ボタン */

/* 追加ボタン */
.add-btn {
    display: flex;
    padding: 4px 8px;
    background: var(--btn-color);
    color: var(--secondary-color-1);
    outline: 2px solid var(--primary-color-2);
    outline-offset: -1px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
    flex-shrink: 0;
    justify-content: center;
    align-items: center;
}

.add-btn.material-symbols-rounded {
    font-size: 24px;
    font-weight: 600;
}

.add-btn:hover {
    filter: brightness(120%);
}

.add-btn:hover .tooltip {
    bottom: 32px;
    left: -40px;
    opacity: 1;
    font-weight: 400;
    padding: 10px;
}

.add-btn:hover .tooltip::before {
    content: "";
    position: absolute;
    border: 10px solid transparent;
    border-bottom-color: rgba(0,0,0,0.8);
    top: 8px;
    left: 46px;
    transform: rotate(-180deg);
    transform-origin: bottom center;
}

.secondary-btn { 
    display: flex; 
    background: var(--btn-color); 
    color: var(--secondary-color-1);
    align-items: center; 
    justify-content: center; 
    flex-wrap: wrap;
}

/* プルダウン矢印 */

details .material-symbols-rounded {
    transition: transform 0.1s ease-out;
}

details[open] summary .material-symbols-rounded {
    transform: rotate(90deg);
}

/* 区切り線 */
.section-line {
    display: flex;
    align-self: center;
    border: 1px solid var(--primary-color-3);
    width: calc(100% + 32px);
}

/* モーダル */
dialog {
    position: fixed;
    width: calc(100% - 16px);
    background: var(--bg-color);
    outline: 2px solid var(--primary-color-2);
    justify-self: center;
    align-self: flex-start;
    margin: 20px 8px;
    border-radius: 8px;
    overflow: auto;
    border: none;
    -ms-overflow-style: none;
    scrollbar-width: none;
}

dialog::-webkit-scrollbar {
    display: none;
}

dialog::backdrop {
    background: rgba(0,0,0,0.5);
}

/* ツールチップ */
.tooltip {
    position: absolute;
    min-height: 32px;
    background: rgba(0,0,0,0.9);
    color: var(--secondary-color-1);
    padding: 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    pointer-events: none;
    opacity: 0;
    margin: 5px 0;
    z-index: 1000;
    bottom: calc(anchor(bottom) + 40px);
    position-anchor: var(--target);
}

.tooltip::before {
    content: "";
    position: absolute;
    border: 10px solid transparent;
    border-bottom-color: rgba(0,0,0,0.8);
    margin-top: 4px;
    transform: rotate(-180deg);
    transform-origin: bottom center;
}

/* 出力ボックス */
.output-box {
    background: var(--secondary-color-1);
    border: 1px solid var(--primary-color-3);
    border-radius: 4px;
    padding: 10px;
    position: relative;
}

.output-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--primary-color-3);
    margin-bottom: 6px;
}

.output-text {
    font-family: 'Courier New', monospace;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-color);
    word-break: break-all;
    user-select: all;
    padding-right: 70px;
    min-height: 20px;
}

/* ========================================
   ヘッダー関連
   ======================================== */

/* 固定ヘッダー */
header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    width: 100%;
    height: 40px;
    background: var(--primary-color-1);
    z-index: 1000;
}

/* ロゴエリア */
.logo {
    margin-top: -4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    color: var(--secondary-color-1);
}

.title {
    padding-left: 10px;
    text-align: center;
    font-size: 30px;
    font-weight:800;
}

/* ヘッダーメニュー */
.header-menu {
    display: flex;
    width: 50%;
    max-width: 300px;
    min-width: 120px;
    height: stretch;
    justify-content: flex-end;
    color: var(--secondary-color-1);
    position-anchor: ;
}

.header-menu-item {
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    width: stretch;
    height: stretch;
    color: var(--secondary-color-1);
    cursor: pointer;
    opacity: 1;
    transition: 0.2s ease;
}

.header-menu-item:hover {
    background: rgba(255,255,255,0.1);
}

.header-menu-item:hover .tooltip {
    background: var(--primary-color-1);
    opacity: 1;
    bottom: calc(anchor(bottom) - 40px);
    transform: translateX(-20%);
}

.header-menu-item:hover .tooltip::before {
    display: none;
}

.header-menu-item span {
    font-size: 32px;
    font-variation-settings: 'FILL' 1;
}

.settings-menu {
    position: relative;
}

.settings-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    background: var(--primary-color-1);
    border: 1px solid var(--primary-color-2);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
    min-width: 180px;
    padding: 6px 0;
    z-index: 1100;
}

.settings-dropdown.hidden {
    display: none;
}

.settings-dropdown-item {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    color: var(--secondary-color-1);
    background: transparent;
    border: none;
    font-size: 14px;
    cursor: pointer;
    text-align: left;
}

.settings-dropdown-item:hover {
    background: rgba(255, 255, 255, 0.08);
}


/* ========================================
   セクション関連
   ======================================== */

/* セクション本体 */
.section {
    flex: 1 720px;
    max-width: 720px;
    background: none;
}

@media screen and (min-width:720px) {
    .content {
        flex-wrap: nowrap;
    }
    .section {
        flex: 1 300px;
    }
}

/* セクションヘッダー */

.section-header, .section-header-m {
    background: var(--secondary-color-1);
    padding: 4px 8px;
    border-radius: 4px 4px 0 0;
    font-weight: 600;
    font-size: 18px;
    outline: 2px solid var(--primary-color-2);
    color: var(--primary-color-1);
    cursor: pointer;
    user-select: none;
    display: flex;
    justify-content: flex-start;
    align-items: center;
}

.section-header-m {
    position: fixed;
    width: calc(100% - 16px);
    outline: 2px solid var(--primary-color-2);
    anchor-name: --S-header;
}
input[type="radio"] {
    display: none;
}

/* セクションボディ */
.section-body {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 8px;
    border-radius: 0 0 4px 4px;
    outline: 2px solid var(--primary-color-2);
    margin-top: 2px;
    background: var(--bg-color);
    height: auto;
    transition:
        max-height 0.2s ease-out,
        padding 0.2s;
    overflow: visible;
    -ms-overflow-style: none;
    scrollbar-width: none;
    box-shadow: 0 4px 8px 2px var(--primary-color-3);
}

.section-body::-webkit-scrollbar {
    display: none;
}

dialog .section-body {
    margin-top: 40px;
    width: 100%;
    padding: 16px;
}

/*タブ要素*/
.tab-switch {
    display: flex;
    flex-wrap: wrap;
}

.tab-switch > label + div{
    flex: 1 720px;
}

.tab-switch > label {
    flex: 1;
    background: var(--secondary-color-1);
    cursor: pointer;
    color: var(--primary-color-3);
    order: -1;
    transition: all 0.1s ease-out;
}

.tab-content {
    display: none;
}


.tab-switch > label:has(:checked) {
    flex: 1;
    background: var(--secondary-color-1);
    color: var(--primary-color-1);
    transition: all 0.1s ease-out;
}

.tab-switch > label:has(:checked) + .tab-content {
    display: flex;
}

/* ========================================
   フォーム・入力要素
   ======================================== */

/* 入力フォーム */
.add-area {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    border-radius: 8px;
}

.add-area > div {
    flex-direction: column;
	width: calc(50% - 4px);
}

.add-area label {
    word-break: keep-all;
}

.add-area input {
    min-width: 64px;
}

.add-area input:focus, 
.add-area select:focus {
    outline: none;
    border-color: var(--pickup-color);
}

.add-area input[type="color"] {
    padding: none;
    height: 40px;
    width: 60px;
    cursor: pointer;
}

/* ラジオボタンオプション */
.target-options {
    display: flex;
    gap: 8px;
    align-items: center;
    word-break :keep-all;
    user-select: none;
}

.radio-option {
    display: flex;
    gap: 4px;
    cursor: pointer;
    align-content: center;
    justify-content: center;
    background: var(--bg-color);
    outline: 2px solid var(--primary-color-3);
    aspect-ratio: 1 / 1;
}

.radio-option label{
    text-align: center;
    font-size: 14px;
    font-weight: 800;
    color: var(--primary-color-3);
    margin: 0;
    cursor: pointer;
}

.target-options input[type="number"] {
    height: 32px;
    width: 48px;
    cursor: pointer;
}

.radio-option:has(input:checked) label {
    color: var(--primary-color-1);
}

.radio-option:has(input:checked)  {
    background: var(--p);
    outline: 2px solid var(--primary-color-1);
}

/* バフコントロール */
.buff-control {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    container-type: inline-size;
}

.buff-control > *:not(div) {
    height: 32px;
    width: 32px;
    aspect-ratio: 1 / 1;
}

.turn-btn {
    background: var(--secondary-color-1);
    color: var(--primary-color-1);
}

.turn-btn:hover {
    background: var(--pickup-color);
}

#turnResetBtn:hover {
    background: var(--danger-color);
}

.turn-btn:hover .tooltip {
    opacity: 1;
    align-items: normal;
}

.turn-btn:hover .tooltip::before {
    top: 12px;
}

/* トグルボタン（ON/OFF切り替え） */
.toggle-btn {
    width: 48px;
    height: 24px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    box-shadow: inset 0 2px rgba(0,0,2,0.1);
    align-items: center;
}

@container (max-width: 140px) {
  .toggle-btn {
    position: absolute;
    align-self: center;
  }
}

.toggle-btn.active {
    background: rgba(0,0,0,0.3);
    mix-blend-mode: luminosity;
}

.toggle-btn::after {
    display: flex;
    content: '';
    position: relative;
    left: 3px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--secondary-color-1);
    box-shadow: inset 0 -1px rgba(0,0,0.5,0.2);
}

.toggle-btn.active::after {
    transform: translateX(24px);
}

/* コピーボタン */
.copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: var(--btn-color);
    color: var(--secondary-color-1);
    border: none;
    border-radius: 4px;
    padding: 4px 10px;
    font-size: 11px;
    cursor: pointer;
}

.copy-btn:hover {
    filter: brightness(140%);
}

.copy-btn.copied {
    background: var(--success-color);
}

/* ========================================
   リスト・アイテム表示
   ======================================== */

/* アイテムリスト */
.item-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 4px;
    height: 240px;
    min-height: 100px;
    background: rgba(0,0,0,0.1);;
    border-radius: 4px;
    outline: 1px solid var(--primary-color-3);
    resize: vertical;
    overflow: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
}

.item-list::-webkit-scrollbar {
    display: none;
}



.itemindex {
    position: relative;
    display: flex;
    align-items: center;
}

.itemindex  select {
    width: 32px;
    height: 32px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background: var(--secondary-color-1);
    border: none;
    color: var(--primary-color-1);
}
        
.itemindex > span {
    position: absolute;
    z-index: 1;
    font-size: 32px;
    color: var(--primary-color-1);
    pointer-events: none;
}

@container (259.8px < width < 300px) {
  #judgeSection .itemindex {
    margin-left: auto;
  }
}

.itemindex:hover > span {
    background: var(--primary-color-2);
    color: var(--secondary-color-1);
}



.itemindex:hover .tooltip {
    bottom: 32px;
    left: -40px;
    opacity: 1;
}

.itemindex:hover .tooltip::before {
    content: "";
    position: absolute;
    border: 10px solid transparent;
    border-bottom-color: rgba(0,0,0,0.8);
    top: 8px;
    left: 46px;
    transform: rotate(-180deg);
    transform-origin: bottom center;
}

/* カテゴリ */
.category-header {
    display: flex;
    align-items: center;
    padding: 2px 4px;
    background: var(--secondary-color-1);
    outline: 1px solid var(--primary-color-3);
    border-radius: 2px;
    font-size: 16px;
    font-weight: 600;
    color: var(--primary-color-2);
    transition: all 0.1s;
    cursor: grab;
    position: relative;
}

.category-header.dragging {
    opacity: 30% !important;
    background: none !important;
    outline: 2px solid var(--btn-color) !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    cursor: grabbing;
}
        
.category-body {
    display: flex;
    flex-direction: column;
    gap: 2px;
    width: calc(100% - 16px);
    margin-top: 3px;
    margin-left: auto;
    overflow: visible;
}

/* アイテム基本スタイル */
.item {
    display: flex;
    padding: 4px 8px;
    background: var(--secondary-color-1);
    border-radius: 2px;
    font-size: 14px;
    transition: all 0.1s;
    position: relative;
    min-height: 24px;

    font-family: Noto Sans JP;;
}

.item-param {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
}

/* アイテムインタラクション */
.item.clickable {
    cursor: pointer;
}

.item.material-symbols-rounded {
    cursor: move;
    font-size: 24px;
    user-select: none;
    flex-shrink: 0;
    opacity: .4;
    margin-left: -6px;
    overflow: hidden;
}

.item.clickable:hover {
    outline: 2px solid var(--btn-color);
}

.item:hover .tooltip {
    opacity: 1;
    align-items: normal;
    bottom: 100%;
    left: 0px;
    transform: translateX(-10px);
}

.item.selected {
    background: var(--bg-color);
    outline: 1px solid var(--btn-color);
    box-shadow: 0 0 0 2px rgba(102,126,234,0.2);
}

/* ドラッグ機能 */
.item.dragging {
    opacity: 30% !important;
    background: none !important;
    outline: 1px solid var(--add-color) !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    cursor: grabbing;
}

.item.drag-over-top::before {
    content: '';
    position: absolute;
    top: -3px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--danger-color);
}

.item.drag-over-bottom::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--danger-color);
}

.category-drag-over {
    outline: 2px dashed var(--btn-color);
    background: #e7f3ff;
    border-radius: 4px;
}

/* バフアイテム */
.buff-item {
    display: flex;
    flex-direction: column;
    position: relative;
    cursor: grab;
    container-type: inline-size;
}

.buff-item:not(.active) {
    opacity: 0.4;
    filter: grayscale(50%);
}

.buff-item.active {
    opacity: 1;
    filter: none;
}

.buff-summary {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
}

.buff-detail-body {
    margin-top: 8px;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 12px;
    background: rgba(255,255,255,0.8);
    color: var(--primary-color-2);
    cursor: auto;
}

.buff-detail-body div {
    display: flex;
    flex: 1;
    flex-wrap: wrap;
    gap: 1px;
    padding-bottom: 2px;
    border-bottom: 1px solid var(--primary-color-3);
}

.buff-detail-body div:first-of-type p{
    word-break: break-all;
    margin-right: 8px;
}

.buff-memo {
    display: grid;
    grid-template-columns: 48px 1fr;
    gap: 8px;
    align-items: flex-start;
}

.item-memo-text {
    white-space: pre-wrap;
    word-break: break-word;
    font-weight: 400;
}

.memo-empty {
    opacity: 0.7;
}

.memo-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
}

/* アイテム内要素 */
.item-name {
    font-size: 17px;
    font-weight: 600;
    margin-left: 16px;
    margin-top: -3px;
}

.item-description {
    font-size: 12px;
    opacity: 0.9;
    margin-right: 8px;
    font-weight: 600;
}

.item-effect {
    color: inherit;
    font-size: 12px;
    font-weight: 400;
    margin-right: auto;
}

.item-detail {
    color: var(--primary-color-2);
    font-size: 12px;
    font-weight: 600;
}

/* バフボタングループ */
.buff-btn {
    display: flex;
    justify-content: flex-end;
    margin-left: auto;
    gap: inherit;
}

/* ターンバッジ */
.turn-badge {
    display: flex;
    position: absolute;
    top: -4px;
    left: -12px;
    width: 24px;
    height: 24px;
    background: var(--bg-color);
    color: var(--primary-color-1);
    border-radius: 50%;
}

.turn-badge span {
    height: 24px;
    margin: 0.1em auto;
    text-align: right;
    font-size: 14px;
    font-weight: 800;
}

/* ========================================
   情報表示・フィードバック
   ======================================== */

/* ヘルプ */
.btn-help {
    position: fixed;
    right: calc(anchor(right) + 12px);
    top: calc(anchor(bottom) + 8px);
    background: var(--secondary-color-1);
    height: 40px;
    width: 40px;
    position-anchor: --S-header;
}

.btn-help:hover {
    background: var(--pickup-color);
}

.btn-help span {
    position:relative;
    color: var(--primary-color-1);
}

.btn-help input {
    display: none;
}
        
.btn-help:has(input:checked) {
    background: #fff3cd;
    outline:inset 1px solid #ffc107 !important;
    color: #ffc107 !important;
    box-shadow: inset 0 1px rgba(0,0,0,0.2) !important;
}
        
.note {
    background: #fff3cd;
    border: 1px solid #ffc107;
    border-radius: 4px;
    padding: 8px;
    font-size: 12px;
    color: #856404;
    display: none;
}

.section-body:has(.btn-help input:checked) .m-8 .note {
     display: block;
 }

/* 空メッセージ */
.empty-message {
    text-align: center;
    color: var(--primary-color-2);
    font-size: 12px;
    padding: 12px;
}

/* コピーライト */
.copyright {
    margin: 12px;
    font-size: 12px;
    color: var(--text-color);
        cursor: pointer;
}

.copyright.summary {
    justify-self: center;
}

.copyright summary::before {
    content: '▼';
    font-size: 10px;
    transform: rotate(-90deg);
    transition: transform .25s;
}



/* ========================================
   ユーティリティクラス
   ======================================== */

.full-width { width: 100%; }
.harf-width { width: 50%; }
.hidden { display: none; }
.m-8 { margin: 8px 0; }
.m-4 { margin: 4px 4; }
.mb-12 { margin-bottom: 12px; }
.pt-12 { padding-top: 12px; }
.bt-top { border-top: 2px solid var(--primary-color-1); }
.textarea-mono { width: 100%; padding: 8px; border: 1px solid var(--secondary-color-2); border-radius: 4px; font-size: 12px; font-family: monospace; resize: vertical; }
.row-controls { display: flex; gap: 6px; margin-top: 6px; }
.flex-1 { flex: 1; }
.fd-rw { flex-direction: row; }
.fd-cl { flex-direction: column; }
.jc-end { justify-content: flex-end; }
.pt-R {justify-items: flex-end;margin-left: auto;}
.btn--muted { background: var(--primary-color-3); color: var(--secondary-color-1); outline: none;}
.btn--info { background: var(--primary-color-3); color: var(--secondary-color-1);}
.btn--danger { background: var(--danger-color); width: 30%; color: var(--secondary-color-1);}
.small-text { font-size: 11px; color: var(--primary-color-1); margin-top: 6px; }
.label-s { font-size: 12px; font-weight: 600; color: var(--primary-color-2); display: block; margin: 8px 0 2px 2px;}
.label-L { font-size: 16px; font-weight: 600; color: var(--primary-color-2); display: flex; margin: 0 0 4px 2px; gap: 8px; align-items: center; }
.input-compact { width: 60px; padding: 4px 6px; border: 1px solid var(--primary-color-1); border-radius: 4px; }

</style>
</head>
<body>
<!--ヘッダー-->
    <header>
        <div class="logo">
            <div class="title">JET-PALET</div>
        </div>
        <div class="header-menu">
            <div class="settings-menu">
                <button class="header-menu-item" id="settingsToggle" aria-haspopup="true" aria-expanded="false" style="anchor-name: --settings">
                    <div class="tooltip" style="--target: --settings">設定</div>
                    <span class="material-symbols-rounded">settings</span>
                </button>
                <div class="settings-dropdown hidden" id="settingsDropdown">
                    <button class="settings-dropdown-item" data-target="DataOption">
                        <span class="material-symbols-rounded">checkbook</span>
                        <span>データ管理</span>
                    </button>
                    <button class="settings-dropdown-item" data-target="userMacroModal">
                        <span class="material-symbols-rounded">bookmarks</span>
                        <span>ユーザーマクロ</span>
                    </button>
                </div>
            </div>
            <a class="header-menu-item" style="anchor-name: --help" href="https://unexpected-avatar-e3c.notion.site/BUFCON-2d1c2563a7d8804b97f9e64754356198" target="_blank" rel="noopener noreferrer">
                <div class="tooltip" style="--target: --help">使い方</div>
                <span class="material-symbols-rounded">help</span>
            </a>
            <a class="header-menu-item" style="anchor-name: --feedback" href="https://forms.gle/Z5YU8JaAVVUmWMaZ7" target="_blank" rel="noopener noreferrer">
                <div class="tooltip" style="--target: --feedback">感想投稿フォーム</div>
                <span class="material-symbols-rounded">feedback</span>
            </a>
        </div>
    </header>

<div class="container">

<div class="content">
<!--データ管理　モーダル-->
            <dialog class="section modal" id="DataOption" closedby="any">
                    <div class="section section-header-m">
                        <span class="material-symbols-rounded">checkbook</span>
                        <span class="section-header-title">データ管理</span>
                    </div>
                    <div class="section-body" style="margin-top: 32px;">
                        <div class="mb-12">
                            <label class="label-s">クリップボードから貼り付けて読み込み:</label>
                                <textarea id="importText" placeholder='.txtまたは.jsonファイルを直接ドロップしても読み込めます' class="textarea-mono" style="height:120px; flex: 3;"></textarea>
                        </div>
                        <div class="mb-12" style="display: flex; gap: 12px;">
                            <button class="add-btn secondary-btn flex-1" id="importConfirm">
                                <span class="material-symbols-rounded">download</span>
                                <span>このデータを読み込み</span>
                            </button>
                            <button class="add-btn secondary-btn btn--info flex-1" id="exportToClipboard">
                                <span class="material-symbols-rounded">content_copy</span>
                                <span>現在の設定を</span><span>クリップボードにコピー</span>
                            </button>
                        </div>
                        <div class="pt-12 bt-top">
                            <button class="add-btn secondary-btn btn--danger" id="resetBtn">
                                <span class="material-symbols-rounded">delete_forever</span>
                                <span>すべて</span><span>初期化</span>
                            </button>
                        </div>
                    </div>
            </dialog>
<!--ユーザーマクロ　モーダル-->
            <dialog class="section modal" id="userMacroModal" closedby="any">
                    <div class="section section-header-m">
                        <span class="material-symbols-rounded">bookmarks</span>
                        <span class="section-header-title">ユーザーマクロ</span>
                    </div>
                    <div class="section-body" style="margin-top: 32px; display: flex; flex-direction: column; gap: 16px;">
                        <p class="small-text">マクロの登録と管理は今後の機能追加で利用されます。</p>
                        <div class="row-controls" style="justify-content: flex-end;">
                            <button class="add-btn secondary-btn" id="userMacroClose">閉じる</button>
                        </div>
                    </div>
            </dialog>
<!--バフ/デバフ-->
            <div class="section">
                <div class="section-header">
                    <span class="material-symbols-rounded">azm</span>
                    <span class="section-header-title">バフ/デバフ</span>
                </div>
                <div class="section-body">
                    <div class="buff-control" full-width>
                            <button class="add-btn turn-btn" style="anchor-name: --getTurn;" id="turnProgressBtn">
                                <div class="tooltip" style="--target: --getTurn">すべてのアクティブなターンを１減らす</div>
                                <span class="material-symbols-rounded">skip_next</span></button>
                            <button class="add-btn turn-btn" style="anchor-name: --reset;" id="turnResetBtn">
                                <div class="tooltip" style="--target: --reset">すべてのターンをリセット</div>
                                <span class="material-symbols-rounded">replay</span></button>
                            <button class="material-symbols-rounded add-btn pt-R" style="anchor-name: --addbuffbtn;" onclick="openBuffModal()">
                            add_2<div class="tooltip" style="--target: --addbuffbtn;">バフ/デバフを追加</div>
                            </button>
                            <label class="itemindex" style="anchor-name: --bookmark;">
                                <div class="tooltip" style="--target: --bookmark">カテゴリへ移動</div>
                                <span class="material-symbols-rounded">bookmark</span>
                                <select class="add-btn" id="buffItemIndex">
                                </select>
                            </label>
                    </div>
                    <div class="item-list" id="buffList">
                        <div class="empty-message">バフを追加してください</div>
                    </div>
                </div>
            </div>
<!--バフ/デバフ モーダル-->
        <dialog class="section modal" id="buffaddmodal" closedby="any">
            <div class="section section-header-m">
                <span class="section-header-title">バフ追加</span>
                        <button class="material-symbols-rounded add-btn pt-R btn--danger" command="close" commandfor="buffaddmodal">
                        close
                        </button>
            </div>
            <div class="section-body">
                <div class="m-8">
                            <div class="label-L">
                                    <span class="material-symbols-rounded">add_box</span>
                                    <span>個別追加</span>
                                    <label class="add-btn btn-help">
                                        <input type="checkbox"/>
                                        <span class="material-symbols-rounded">help</span>
                                    </label>
                            </div>
                            <div class="add-area">
                            <div>
                                <div>
                                    <label for="buffName" class="label-s">バフ名</label>
                                    <input type="text" id="buffName" placeholder="名前">
                                </div>
                                <div>
                                    <label for="buffTargetSelect" class="label-s">効果先を選択</label>
                                    <select id="buffTargetSelect" multiple size="1"></select>
                                </div>
                                <div class="note">カテゴリを選択した場合、そのカテゴリに含まれるすべてのパッケージに適用します。<br>効果先を選択しない場合、「効果先：なし」として登録されます。
                                </div>
                                <div>
                                    <label for="buffEffect" class="label-s">コマンド</label>
                                    <div style="display: flex;">
                                        <input type="text" id="buffEffect" placeholder="例：+2,-1d6,//ダイスボーナス}=+1">
                                        <button class="add-btn btn--muted" onclick="insertText('//NAME=')">//=</button>
                                    </div>
                                    </div>
                                <div class="note">効果にコマンドを入力する場合は+/-などの演算子も含めて入力してください。<br>バフはONになっているものを上から順に反映します。
                                </div>
                                <div class="note">代入記法：<br>//NAME=コマンド　*NAMEは任意の文字列<br>という記述で、判定や攻撃の基本ロール内にある//NAME//にコマンドが代入されます。これにより、判定や計算式の任意の位置にバフの効果を挿入することができます。<br>同じ変数を指定したバフが複数あるときは、バフの並び順にしたがって全て代入されます。
                                </div>
                                <div class="note">代入記法は「,」で区切ることで、一つのバフから複数の場所へ代入を指示することができます。<br>通常の記法とも併用できます。<br>例：//ダイスボーナス=+1,//ダイスの種類=20,-2
                                </div>
                                <div class="fd-rw">
                                    <div style="width: 50%;">
                                        <label for="buffTurn" class="label-s">ターン</label>
                                        <input type="number" id="buffTurn" placeholder="数値">
                                    </div>
                                    <div class="note">効果時間がターンで決められている場合、効果の続くターン数を指定します。
                                    </div>
                                    <div style="width: 50%;">
                                        <label for="buffColor" class="label-s">ラベルの色を選択</label>
                                        <input type="color" id="buffColor" value="#0079FF" list="buffColor-list">
                                        <datalist id="buffColor-list">
                                            <option value="#0079FF"></option>
                                            <option value="#953D96"></option>
                                            <option value="#F64E9D"></option>
                                            <option value="#DF383E"></option>
                                            <option value="#F7821B"></option>
                                            <option value="#FEC626"></option>
                                            <option value="#62BA46"></option>
                                            <option value="#F8F9FA"></option>
                                        <option value="#141414"></option>
                                        <option value="#595959"></option>
                                        </datalist>
                                    </div>
                                    <div class="note">その他からより詳細に色を指定できます。</div>
                                </div>
                                <div>
                                    <label for="buffCategorySelect" class="label-s">カテゴリを選択</label>
                                    <select id="buffCategorySelect" size="1">
                                        <option value="none">なし</option>
                                    </select>
                                </div>
                                <div class="note">カテゴリを指定すると、そのカテゴリに入った状態で登録されます。</div>
                            </div>
                                <div>
                                    <div class="memo-header">
                                        <label class="label-s" for="buffMemo">メモ欄</label>
                                        <label class="label-s">
                                            <input type="checkbox" id="buffSimpleMemoToggle" style="min-width: 0px;">
                                            簡易メモを表示
                                        </label>
                                    </div>
                                    <textarea id="buffMemo" class="textarea-mono" style="height: calc(100% - 22px);"></textarea>
                                    <div class="note">簡易メモにはメモの1行目を使用します。</div>
                                </div>
                            <div type="button" class="add-btn" id="addBuffBtn">追加</div>
                        </div>
                    </div>
                <div class="section-line"></div>
                <div class="m-8">
                    <label for="buffCategoryInput" class="label-s">新規カテゴリ追加</label>
                    <div style="display: flex; gap: 8px; flex-direction: column;">
                        <input type="text" id="buffCategoryInput" placeholder="例：魔法、装備" aria-label="バフカテゴリの新規追加">
                        <span type="button" class="add-btn harf-width" id="addBuffCategoryBtn" title="カテゴリを追加">追加</span>
                    </div>
                </div>
                <div class="section-line"></div>
                <div class="m-8">
                    <div class="label-L">
                        <span class="material-symbols-rounded">clear_all</span>
                        <span>一括追加</span>
                    </div>
                        <p class="small-text" style="margin-left: 3em; text-indent: -3em;">形式：バフ名|効果先1,効果先2|簡易メモ|コマンド|ターン|カラーコード|メモ</p>
                        <p class="small-text" style="margin-left: 5em; text-indent: -5em;">カテゴリ：&lt;カテゴリ名&gt;でカテゴリを開始、&lt;/カテゴリ名&gt;で終了。<br>間の行はそのカテゴリに入った状態で登録されます。<br>存在していないカテゴリの場合、カテゴリも同時に登録されます。
                    <div class="add-area fd-cl m-8" id="bulkAddArea">
                        <textarea id="bulkAddText" placeholder="例：マッスルベアー|すべての攻撃|筋力Bアップ|+2|3|#DF383E&#10;バーサク|すべての判定,武器A|命中・ダメUP|+1d6|5" class="textarea-mono" style="height:100px;"></textarea>
                        <div class="row-controls">
                            <span type="button" class="add-btn flex-1" id="bulkAddConfirm">追加を実行</span>
                        </div>
                    </div>
                </div>
            </div>
        </dialog>
<!--タブ-->
        <div class="tab-switch section">
            <label class="section-header"><input type="radio" name="TAB" checked>
                    <span class="material-symbols-rounded">ifl</span>
                    <span class="section-header-title">判定</span>
            </label>
<!--判定-->
            <div class="section-body tab-content" id="judgeSection">
                    <div class="buff-control" full-width>
                        <div class="target-options">
                            <span class="label-s">目標値：</span>
                            <label class="radio-option add-btn">
                                <input type="radio" name="targetType" id="targetNone" value="none" checked>
                                <label for="targetNone" class="label-s">＼</label>
                            </label>
                            <label class="radio-option add-btn">
                                <input type="radio" name="targetType" id="targetGte" value="gte">
                                <label for="targetGte" class="label-s">≧</label>
                            </label>
                            <label class="radio-option add-btn">
                                <input type="radio" name="targetType" id="targetLte" value="lte">
                                <label for="targetLte" class="label-s">≦</label>
                            </label>
                            <input type="number" id="targetValue" placeholder="値" class="input-compact">
                        </div>
                        <button class="material-symbols-rounded add-btn pt-R" style="anchor-name: --addbuffbtn;" onclick="openJudgeModal()">
                            add_2<div class="tooltip" style="--target: --addbuffbtn;">判定を追加</div>
                            </button>
                        <label class="itemindex anchor-name: --bookmark;">
                            <div class="tooltip" style="--target: --bookmark">カテゴリへ移動</div>
                            <span class="material-symbols-rounded">bookmark</span>
                            <select class="add-btn" id="judgeItemIndex"></select>
                        </label>
                    </div>

                                <div class="item-list" id="judgeList">
                                    <div class="empty-message">判定パッケージを追加してください</div>
                                </div>
                        <div class="output-box">
                            <div class="output-label">コピペ用コマンド</div>
                            <div class="output-text" id="judgeOutput">判定を選択してください</div>
                            <button class="copy-btn" data-target="judgeOutput">コピー</button>
                        </div>
                </div>
<!--判定　モーダル-->
            <dialog class="section modal" id="judgeaddmodal" closedby="any">
                    <div class="section section-header-m">
                        <span class="section-header-title">判定パッケージ追加</span>
                        <button class="material-symbols-rounded add-btn pt-R btn--danger" command="close" commandfor="judgeaddmodal">
                        close
                        </button>
                    </div>
                    <div class="section-body">
                        <div class="m-8">
                            <div class="label-L">
                                <span class="material-symbols-rounded">add_box</span>
                                <span>個別追加</span>
                                <label class="add-btn btn-help">
                                    <input type="checkbox"/>
                                    <span class="material-symbols-rounded">help</span>
                                </label>
                            </div>
                        <div class="add-area">
                            <div>
                                <div>
                                    <label for="judgeName" class="label-s">判定名</label>
                                    <input type="text" id="judgeName" placeholder="例：命中、回避">
                                </div>
                                <div>
                                    <label for="judgeRoll" class="label-s">判定ロール</label>
                                    <input type="text" id="judgeRoll" placeholder="例：1d20,2d6">
                                </div>
                                <div class="note">判定の基本となるダイスロールを記入します。システムごとの独自のコマンドも入力できます。</div>
                                <div class="note">代入記法：<br>//NAME//　*NAMEは任意の文字列<br>という記述で、//NAME//を指定したバフからコマンドが代入されます。<br>バフが発動していない等でなにも代入されない場合は、ないものとして扱われます。</div>
                                <div>
                                    <label for="judgeCategorySelect" class="label-s">カテゴリを選択</label>
                                    <select id="judgeCategorySelect" size="1">
                                        <option value="none">なし</option>
                                    </select>
                                </div>
                                <div class="note">バフの効果先がカテゴリを指定している場合、カテゴリ内のすべての判定に適用されます。</div>
                            </div>
                            <div>
                                    <label class="label-s">メモ欄</label>
                                    <textarea id="judgeMemo" class="textarea-mono" style="height: calc(100% - 20px);"></textarea>
                            </div>
                            <div type="button" class="add-btn" id="addJudgeBtn">追加</div>
                        </div>
                        </div>
                        <div class="section-line"></div>
                        <div class="m-8">
                            <label for="judgeCategoryInput" class="label-s">新規カテゴリ追加</label>
                            <div style="display: flex; gap: 8px; flex-direction: column;">
                                <input type="text" id="judgeCategoryInput" placeholder="例：戦闘、探索" aria-label="判定カテゴリの新規追加">
                                <span type="button" class="add-btn harf-width" id="addJudgeCategoryBtn" title="カテゴリを追加">追加</span>
                            </div>
                        </div>
                        <div class="section-line"></div>
                        <div class="m-8">
                            <div class="label-L">
                                <span class="material-symbols-rounded">clear_all</span>
                                <span>一括追加</span>
                            </div>
                                <p class="small-text">形式：判定名|判定ロール</p>
                                <p class="small-text" style="margin-left: 7em; text-indent: -7em;">カテゴリ記法：&lt;カテゴリ名&gt;でカテゴリを開始、&lt;/カテゴリ名&gt;で終了。<br>間の行はそのカテゴリに入った状態で登録されます。<br>存在していないカテゴリの場合、カテゴリも同時に登録されます。
                            <div class="add-area fd-cl m-8" id="bulkAddJudgeArea">
                                <textarea id="bulkAddJudgeText" placeholder="例: 命中判定|2d6+1&#10;回避判定|1d20" class="textarea-mono" style="height:80px;"></textarea>
                                <div>
                                    <div class="row-controls">
                                        <span type="button" class="add-btn flex-1" id="bulkAddJudgeConfirm">追加を実行</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </dialog>
<!--タブ-->
            <label class="section-header"><input class="tab-btn" type="radio" name="TAB">
                <span class="material-symbols-rounded">swords</span>
                <span class="section-header-title">攻撃</span>
            </label>
<!--攻撃-->           
                <div class="section-body tab-content">
                    <div class="buff-control" full-width>
                        <button class="material-symbols-rounded add-btn pt-R" style="anchor-name: --addbuffbtn;" onclick="openAttackModal()">
                            add_2<div class="tooltip" style="--target: --addbuffbtn;">攻撃を追加</div>
                            </button>
                        <label class="itemindex anchor-name: --bookmark;">
                            <div class="tooltip" style="--target: --bookmark">カテゴリへ移動</div>
                            <span class="material-symbols-rounded">bookmark</span>
                            <select class="add-btn" id="attackItemIndex"></select>
                        </label>
                    </div>
                    <div class="item-list" id="attackList">
                        <div class="empty-message">攻撃パッケージを追加してください</div>
                    </div>
                    <div class="output-box">
                        <div class="output-label">コピペ用コマンド</div>
                        <div class="output-text" id="attackOutput">攻撃を選択してください</div>
                        <button class="copy-btn" data-target="attackOutput">コピー</button>
                    </div>
                </div>
                
<!--攻撃　モーダル-->
            <dialog class="section modal" id="attackaddmodal" closedby="any">
                    <div class="section section-header-m">
                        <span class="section-header-title">攻撃パッケージ追加</span>
                        <button class="material-symbols-rounded add-btn pt-R btn--danger" command="close" commandfor="attackaddmodal">
                        close
                        </button>
                    </div>
                    <div class="section-body">
                        <div class="m-8">
                            <div class="label-L">
                                    <span class="material-symbols-rounded">add_box</span>
                                    <span>個別追加</span>
                                    <label class="add-btn btn-help">
                                        <input type="checkbox"/>
                                        <span class="material-symbols-rounded">help</span>
                                    </label>
                            </div>
                            <div class="add-area">
                            <div>
                                <div>
                                    <label for="attackName" class="label-s">攻撃名</label>
                                    <input type="text" id="attackName" placeholder="例：ソード(1H)">
                                </div>
                                <div>
                                    <label for="attackRoll" class="label-s">攻撃ロール</label>
                                    <input type="text" id="attackRoll" placeholder="例: 2d6,K20@10">
                                </div>
                                <div class="note">攻撃の基本となるダイスロールや固定値を記入できます。
                                </div>
                                <div class="note">代入記法：<br>//NAME　*NAMEは任意の文字列<br>という記述で、//NAMEを指定したバフからコマンドが代入されます。<br>バフが発動していない等でなにも代入されない場合は、ないものとして扱われます。
                                </div>
                                <div>
                                    <label for="attackCategorySelect" class="label-s">カテゴリを選択</label>
                                    <select id="attackCategorySelect" size="1">
                                        <option value="none">なし</option>
                                    </select>
                                </div>
                                <div class="note">バフの効果先がカテゴリを指定している場合、カテゴリ内のすべての攻撃に適用されます。</div>
                            </div>
                                <div>
                                    <label class="label-s">メモ欄</label>
                                    <textarea id="attackMemo" class="textarea-mono" style="height: calc(100% - 20px);"></textarea>
                                </div>
                            <div type="button" class="add-btn" id="addAttackBtn">追加</div>
                        </div>
                        </div>
                        <div class="section-line"></div>
                        <div class="m-8">
                            <label for="attackCategoryInput" class="label-s">新規カテゴリ追加</label>
                            <div style="display: flex; gap: 8px; flex-direction: column;">
                                <input type="text" id="attackCategoryInput" placeholder="例：近接、魔法" aria-label="攻撃カテゴリの新規追加">
                                <span type="button"n class="add-btn harf-width" id="addAttackCategoryBtn" title="カテゴリを追加">追加</span>
                            </div>
                        </div>
                        <div class="section-line"></div>
                        <div class="m-8">
                            <div class="label-L">
                                <span class="material-symbols-rounded">clear_all</span>
                                <span>一括追加</span>
                            </div>
                                <p class="small-text">形式：攻撃名|攻撃ロール</p>
                                <p class="small-text" style="margin-left: 7em; text-indent: -7em;">カテゴリ記法：&lt;カテゴリ名&gt;でカテゴリを開始、&lt;/カテゴリ名&gt;で終了。<br>間の行はそのカテゴリに入った状態で登録されます。<br>存在していないカテゴリの場合、カテゴリも同時に登録されます。
                            <div class="add-area fd-cl m-8" id="bulkAddAttackArea">
                                <textarea id="bulkAddAttackText" placeholder="例: バスタードソード|K17@10&#10;ファイアボール|1d6+3" class="textarea-mono" style="height:80px;"></textarea>
                                <div>
                                    <div class="row-controls">
                                        <span type="button" class="add-btn flex-1" id="bulkAddAttackConfirm">追加を実行</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </dialog>
<!--タブ閉じ-->
    </div>
</div>
    <details class="copyright">
        <summary>Copyright</summary>
            <div class="copyright"> (c) 2025 竹田ユウヤ<br>
<br>
        本ソフトウェアおよび関連する文書のファイル（以下「ソフトウェア」）の複製を取得した全ての人物に対し、以下の条件に従うことを前提に、ソフトウェアを無制限に扱うことを無償で許可します。これには、ソフトウェアの複製を使用、複製、改変、結合、公開、頒布、再許諾、および/または販売する権利、およびソフトウェアを提供する人物に同様の行為を許可する権利が含まれますが、これらに限定されません。<br>
        上記の著作権表示および本許諾表示を、ソフトウェアの全ての複製または実質的な部分に記載するものとします。<br>
        ソフトウェアは「現状有姿」で提供され、商品性、特定目的への適合性、および権利の非侵害性に関する保証を含むがこれらに限定されず、明示的であるか黙示的であるかを問わず、いかなる種類の保証も行われません。著作者または著作権者は、契約、不法行為、またはその他の行為であるかを問わず、ソフトウェアまたはソフトウェアの使用もしくはその他に取り扱いに起因または関連して生じるいかなる請求、損害賠償、その他の責任について、一切の責任を負いません。<br>
        <br>
        Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br>
        The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.<br>
        THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</div>
    </details>

    <script src="script.js"></script>

</div>
</body>
</html>