window.manualContent = "## 概要\n\n---\n\n**「JET-PALLET」**（旧称BUFCON）はTRPGのオンラインセッションでの戦闘をサポートするWebツールです。\n\nキャラクターのバフ/デバフの管理、それらを反映した判定やダメージ計算用のコマンド生成ができます。ブラウザソフトさえあればオフラインで利用できるため、どこでも使用できます。\n<br>\n**対応システム：** \n- ココフォリア、ユドナリウムなどのBCDiceに対応したオンラインセッションツール\n\n**推奨ブラウザ：**\n- Google Chrome 125 以降\n- Microsoft Edge 125 以降\n- Firefox / Safari（一部表示が崩れる可能性があります）\n\n---\n---\n\n## JET-PALLETでできること\n---\n✓ **バフ/デバフを登録・管理**  \n└ ターン経過、有効/無効の切り替え、順序変更\n\n✓ **判定・攻撃パターンを登録**  \n└ 複数の判定・攻撃に対応\n\n✓ **バフ/デバフを反映したコマンドを自動生成**  \n└ ダイスボットに貼り付けるだけ\n\n✓ **複雑な計算式にも対応**  \n└ 変数代入機能で任意の位置に効果を挿入\n\n---\n\n## その他の機能\n\n- **ユーザー辞書**：よく使う文字列を登録し、入力時のオートコンプリート機能を利用できます。\n- **カテゴリ機能**：バフ/デバフ・判定・攻撃をグループ化して管理\n- **データ管理**：JSONで設定の保存・読み込みが可能\n\n---\n---\n\n# 基本的な使い方\n\n## バフ/デバフを登録する\n\nバフ/デバフとはキャラクターに適用される一時的なボーナス・ペナルティのことです。\n\n### バフ/デバフの追加方法\n\n1. **「バフ/デバフ」セクション**の「+」ボタンをクリック\n2. ダイアログの「個別追加」で以下を入力：\n   - **バフ/デバフ名**：効果の名称 `例：ファイアウェポン、毒状態`\n   - **効果先**：適用対象の判定・攻撃を選択\n   - **簡易メモ**：補足説明 `例：炎属性ダメージ+1d6`\n   - **効果**：反映させるコマンド `例：+2、+1d6、-1`\n   - **ターン**：継続ターン数\n   - **ラベルの色**：表示色（サンプルまたはカラーピッカーで選択）\n   - **メモ**：詳細な説明や備考（入力は任意）\n   - **カテゴリ**：所属するカテゴリを選択\n3. 「追加」ボタンをクリック\n\n<div class=\"admonition note\">\n  <div class=\"admonition-title\">💡 ヒント</div>\n  <div class=\"admonition-body\">\n    <p>効果先を選択する前に、反映先となる判定や攻撃を登録しておくと選択しやすいです。\n  </div>\n</div>\n\n### 効果先の種類\n複数選択可能\n- **なし**：どの判定・攻撃にも適用しない\n- **すべての判定**：登録したすべての判定に適用\n- **すべての攻撃**：登録したすべての攻撃に適用\n- **個別の判定/攻撃**：特定の項目のみに適用\n- **カテゴリ**：カテゴリ内のすべての項目に適用（例：`>>魔法攻撃`）\n\n---\n\n## 判定を登録する\n\n### 判定の追加方法\n\n1. **「判定」セクション**の「+」ボタンをクリック\n2. ダイアログの「個別追加」以下を入力：\n   - **判定名**：判定の種類 `例：命中判定、知覚判定`\n   - **判定ロール**：基本となるダイスロール `例：1d20、2d6+{筋力}`\n   - **カテゴリ**：所属するカテゴリを選択\n4. 「追加」ボタンをクリック\n\n## 攻撃を登録する\n\n### 攻撃の追加方法\n\n1. **「攻撃」セクション**の「+」ボタンをクリック\n3. 以下を入力：\n   - **攻撃名**：攻撃の種類 `例：クレイモア、ファイアボール`\n   - **攻撃ロール**：基本となるダイスロール `例：2d6、K20@10`\n   - **カテゴリ**：該当する場合は選択 `例：近接攻撃、魔法攻撃`\n4. 「追加」ボタンをクリック\n\n## コマンドを生成する\n\n### コマンド生成\n\n1. **「判定」または「攻撃」タブ**で判定一覧から目的の項目をクリック（選択状態になる）\n2. 下部の「コピペ用コマンド」欄に生成されたコマンドが表示される\n3. 「コピー」ボタンでクリップボードにコピー\n4. セッションツールのチャットに貼り付けて実行\n\n<div class=\"admonition note\">\n  <div class=\"admonition-title\">💡 コマンドハイライト</div>\n  <div class=\"admonition-body\">\n    <p>生成されるコマンドの文字は対応するバフの色がついています。<br>\n    読みにくい場合はマウスオーバーすると一色になり拡大表示します。\n  </div>\n</div>\n\n### 目標値の設定\n\n判定タブの「目標値」セクションで設定可能：\n\n- **なし**：目標値なしでコマンド実行\n- **>=目標値**：成功判定（例：>=10）\n- **=<目標値**：失敗判定（例：=<5）\n\n---\n---\n\n# バフ/デバフの管理機能\n\n## バフ/デバフの有効/無効を切り替える\n\nラベルの右側にあるトグルボタンで有効・無効を切り替えできます。\n\n- **有効（不透明）**：コマンド生成時に反映される\n- **無効（半透明）**：コマンド生成時に無視される\n\n---\n\n## ターン経過\n\n有効なバフ/デバフのターン数を進める機能です。\n\n- **「ターン経過」ボタン**：すべての有効なバフ/デバフのターン数が1減少します\n  - ターンが0になると自動的に無効になります\n- **「ターンリセット」ボタン**：すべてのバフ/デバフのターンを登録時の値に戻します\n\n<div class=\"admonition warning\">\n  <div class=\"admonition-title\">⚠️ 途中で無効にしたバフ/デバフ</div>\n  <div class=\"admonition-body\">\n    <p>無効になっているバフ/デバフのターン数は進みません。ターン経過ボタンは有効なバフ/デバフのみに影響します。\n  </div>\n</div>\n\n## 順序\n\nコマンド生成時、バフ/デバフは上から順にコマンドに反映されます。**ドラッグ操作**で順序を変更できます。\n\n## 詳細確認\n\n　各ラベルをクリックすると、バフ/デバフに登録されたデータを確認できます。\n\n## 編集・削除\n\n　各ラベルを右クリックすると、バフ/デバフの再編集または削除ができます。\n\n---\n---\n\n# 発展的な使い方\n\n## 変数代入機能\n\n判定や攻撃のロール内の任意の位置にバフ/デバフの効果を代入できます。\n\n### 使い方\n\n**ステップ1：判定または攻撃のロール内に変数を配置**\n\n```\n例：判定ロール = 2d6+1+//ボーナス//\n```\n\n**ステップ2：バフ/デバフの効果に代入記法を使用**\n\n```\n効果：//ボーナス=+2\n```\n\n判定コマンドは以下のように生成されます\n\n```\n2d6+1+2\n```\n\n### 複数の変数を使う\n\n1つのバフ/デバフから複数の場所に代入する場合は、「,」で区切ります：\n\n```\nバフ/デバフ：//属性ダメージ=+1d6,//ダイス増加=+1\n\n判定ロール：(2//ダイス増加//)d6//属性ダメージ//+5\n↓\n生成されるコマンド：(2+1)d6+1d6+5\n```\n\n### 複数のバフ/デバフを同じ変数に代入\n\n同じ変数を指定したバフ/デバフが複数ある場合、バフ/デバフの並び順に全て代入されます：\n\n```\nバフ/デバフ1：//攻撃力=+1d6\nバフ/デバフ2：//攻撃力=+1\nバフ/デバフ3：//攻撃力=-2\n\n判定ロール：1d20+//攻撃力//\n↓\n生成されるコマンド：1d20+1d6+1-2\n```\n\n### 通常のコマンドと併用\n\n代入変数コマンドと通常のコマンドも併用できます：\n\n```\n//ダイスボーナス=+1,//属性ダメージ=+5,//補足=炎属性ダメージ,+{魔力}\n```\n\n---\n\n## カテゴリ機能\n\nバフ/デバフ・判定・攻撃をグループ化して管理できます。\n\n### カテゴリの追加方法\n\n各セクション（バフ/デバフ、判定、攻撃）の「新規カテゴリ追加」で以下を入力：\n\n```\n例：戦闘判定,スキル判定,探索判定\n```\n\n#### 一括追加時のカテゴリ指定：\n\n```\n<魔法攻撃>\nファイアボール|K20@10\nアイススパイク|K20@10\n</魔法攻撃>\n\n<近接攻撃>\nクレイモア|2d6\n```\n\n### カテゴリの使い方\n\nこのように記述すると、自動的にカテゴリ分けされた状態で登録されます。\n\n### カテゴリを効果先として指定\n\nバフ/デバフの効果先で `>>カテゴリ名` を選択すると、**カテゴリ内のすべての項目**にバフ/デバフが適用されます。\n\n```\n例：\nバフ/デバフ「魔法強化」の効果先 → >>魔法攻撃\n↓\nカテゴリ「魔法攻撃」内のすべての攻撃に「魔法強化」が適用される\n```\n\n### カテゴリへのジャンプ\n\n一覧の上部にあるインデックスボタンで、任意のカテゴリまでスクロールをジャンプできます。\n\n---\n\n## メモ機能\n\nバフ/デバフに詳細な説明や備考を記入できます。\n\n### 簡易説明を表示\n\n「☑簡易説明を表示」をONにすると、メモの**1行目**が一覧に表示されます。\n\n```\nメモ：\nダメージ+1d6、クリティカル時は+2\n〇〇スキルによってのみ付与可能\n\n↓ 一覧には以下のように表示\nバフ/デバフ名：ダメージ+1d6、クリティカル時は+2\n```\n\n---\n\n## ユーザー辞書とオートコンプリート\n\nよく使う文字列をあらかじめ登録しておくと、入力時に自動でサジェストされます。\n\n### ユーザー辞書に登録する\n\n1. **ヘッダー**の「⚙設定」をクリック\n2. 「ユーザー辞書」を選択\n3. 「新規登録・編集」で以下を入力：\n   - **文字列**：登録する文字列（例：+1d6,//筋力ボーナス=+2）\n   - **カテゴリー**：分類用の名前（例：代入記法、よく使う効果）\n4. 「登録」ボタンをクリック\n\n<div class=\"admonition note\">\n  <div class=\"admonition-title\">📝 カテゴリについて</div>\n  <div class=\"admonition-body\">\n    <p>ユーザー辞書のカテゴリーは、登録した文字列を分類・整理する機能のみとなっています。将来的には、よく使う項目を優先的にサジェストするなど、サジェスト順位の設定機能の実装を検討しています。\n  </div>\n</div>\n\n### オートコンプリートを使う\n\nバフ/デバフのコマンド入力欄などで、以下の箇所で自動サジェストが表示されます：\n\n- **バフ/デバフの効果欄**\n- **判定ロール入力欄**\n- **攻撃ロール入力欄**\n- **一括追加入力欄**\n\n入力中に該当する文字列があれば、ドロップダウンリストが表示されます。\n\n<div class=\"admonition tip\">\n  <div class=\"admonition-title\">📝 検索されない記号</div>\n  <div class=\"admonition-body\">\n    <p>オートコンプリート機能では、記号（;:!?'\"(){}[]<>|\\/+*-）は無視して検索されます。\n  </div>\n</div>\n\n---\n---\n\n# データの管理\n\nデータはブラウザに自動的に保存されますが、任意に保存・読込ができます。\n\n## エクスポート（保存）\n\n現在の設定をJSONとしてクリップボードにコピーできます。\n\n1. **ヘッダー**の「⚙設定」→「データ管理」を選択\n2. 「現在の設定をクリップボードにコピー」をクリック\n3. テキストエディタなどに貼り付けて保存\n\n---\n\n## インポート（読み込み）\n\n保存したJSONを読み込んで設定を復元できます。\n\n1. **ヘッダー**の「⚙設定」→「データ管理」を選択\n2. 下部の入力欄に保存したJSONを貼り付ける\n3. 「このデータを読み込み」をクリック\n\n<div class=\"admonition note\">\n  <div class=\"admonition-title\">📝 ファイルの直接インポート</div>\n  <div class=\"admonition-body\">\n    <p><code>.txt</code> または <code>.json</code> ファイルをドラッグ＆ドロップして読み込むこともできます。\n  </div>\n</div>\n\n## データのリセット\n\nすべての設定を初期化します。**この操作は取り消せません。**\n\n1. **ヘッダー**の「⚙設定」→「データ管理」を選択\n2. 「すべて初期化」をクリック\n3. 確認ダイアログで「OK」を選択\n\n---\n---\n\n# その他\n\n## トラブルシューティング\n\n### 生成したコマンドがダイスボットでうまく動作しない\n\n- ✅ バフ/デバフの効果と判定または攻撃のロールで演算子（+,-など）が重複していないか確認\n  - `+(+3)`や`-(+3)`は数式として破綻がないため許容されますが、`1++1`のような表記になっていると許容されません。\n\n### コマンドが反映されない\n\n- ✅ 判定/攻撃がリストで選択されているか確認\n- ✅ バフ/デバフが無効（半透明）になっていないか確認\n- ✅ 効果先の判定/攻撃が正しく指定されているか確認\n\n### 変数が代入されない\n\n- ✅ バフ/デバフの記法が `//変数名=値` 形式になっているか確認\n- ✅ 判定/攻撃ロール内に `//変数名//` が存在するか確認\n- ✅ 変数名の綴りが一致しているか確認（大文字小文字も含む）\n\n### オートコンプリートが表示されない\n\n- ✅ ユーザー辞書に登録した文字列があるか確認\n- ✅ 入力中の文字列が登録内容と部分一致しているか確認\n- ✅ 入力している文字が記号（;:!?'\"(){}[]<>|\\/+*-）だけではないか確認\n\n### バフ/デバフが消えない\n\n- ✅ バフ/デバフのトグルボタンをクリックして無効にしてください\n- ✅ 完全に削除したい場合は右クリックから「削除」を選択してください\n\n### データが保存されない\n\n- ✅ ブラウザのストレージ容量が満杯の可能性があります\n- ✅ 定期的にエクスポートでバックアップを取ることを推奨します\n\n---\n---\n\n## よくある質問\n\n**Q: 複数の判定に異なるバフ/デバフを適用したい**\n\nA: バフ/デバフの効果先で複数の判定を選択してください。または、「すべての判定」を選択するか、提要死体半手または攻撃のカテゴリを選択してください。\n\n**Q: バフ/デバフの効果を計算式の中間に挿入したい**\n\nA: 変数代入機能を使用してください。判定/攻撃ロール内に `//変数名//` を配置し、バフ/デバフの効果に `//変数名=値` と記述します。\n\n**Q: カテゴリ内の特定の項目だけにバフ/デバフを適用したい**\n\nA: カテゴリではなく、個別の項目を効果先として指定してください。\n\n**Q: ユーザー辞書のデータをバックアップしたい**\n\nA: ヘッダーの「⚙設定」→「ユーザー辞書」から「ユーザー辞書をクリップボードにコピー」でエクスポートしてください。\n\n---\n---\n\n## 更新履歴\n\n<details>\n  <summary>バージョン履歴</summary>\n  - **v2.0.0**（2026/01/11）\n  - デザインテーマの刷新\n  - カラーテーマ切り替え機能を追加\n  - 変数代入機能を実装\n  - ユーザー辞書とオートコンプリート機能を追加\n  - カテゴリ機能を実装\n  - メモ・詳細表示機能を追加\n  - パッケージの再編集機能を追加\n  - ステータス管理機能を廃止\n  - ターン管理の仕様を変更\n  - 判定・攻撃セクションをタブ化\n- **v1.2.1**（2025/12/24）\n  - バフの一括追加で効果先「なし」を認識しない不具合を修正。\n  - 一括追加を行うとテキストエリアが消失する不具合を修正。\n- **v1.2.0**（2025/12/22）\n  - レスポンシブデザインに対応\n  - 追加フォームをポップアップダイアログに変更\n  - ファイルを直接インポートする機能を追加\n- **v1.1.0**（2025/12/20）\n  - UI改善\n  - マニュアル追加\n  - フィードバックフォーム追加\n  - 判定/攻撃への複数ステータス選択を追加\n- **v1.0.0**（2025/12/19）\n  - 初版リリース\n  - バフ/デバフ管理機能\n  - 判定・攻撃コマンド生成機能\n  - データ管理機能（エクスポート・インポート）\n</details>\n\n---\n\n## 今後のアップデート予定\n\n検討段階であり、中止・変更する場合があります。\n\n- バフ/デバフ以外のラベル（判定・攻撃）やカテゴリのカラー設定\n- 複数キャラクターを同時に扱えるタブ機能\n- ユーザー辞書にカラーコードのカスタム変数を登録できる機能\n- JSONファイルを書き出す出力方法\n\n---\n";