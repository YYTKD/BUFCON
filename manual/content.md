## 概要

---

**「JET-PALLET」**（旧称BUFCON）はTRPGのオンラインセッションでの戦闘をサポートするWebツールです。

キャラクターのバフ/デバフの管理、それらを反映した判定やダメージ計算用のコマンド生成ができます。ブラウザソフトさえあればオフラインで利用できるため、どこでも使用できます。
<br>
**対応システム：** 
- ココフォリア、ユドナリウムなどのBCDiceに対応したオンラインセッションツール

**推奨ブラウザ：**
- Google Chrome 125 以降
- Microsoft Edge 125 以降
- Firefox / Safari（一部表示が崩れる可能性があります）

---
---

## JET-PALLETでできること
---
✓ **バフ/デバフを登録・管理**  
└ ターン経過、有効/無効の切り替え、順序変更

✓ **判定・攻撃パターンを登録**  
└ 複数の判定・攻撃に対応

✓ **バフ/デバフを反映したコマンドを自動生成**  
└ ダイスボットに貼り付けるだけ

✓ **複雑な計算式にも対応**  
└ 変数代入機能で任意の位置に効果を挿入

---

## その他の機能

- **ユーザー辞書**：よく使う文字列を登録し、入力時のオートコンプリート機能を利用できます。
- **カテゴリ機能**：バフ/デバフ・判定・攻撃をグループ化して管理
- **データ管理**：JSONで設定の保存・読み込みが可能

---
---

# 基本的な使い方

## バフ/デバフを登録する

バフ/デバフとはキャラクターに適用される一時的なボーナス・ペナルティのことです。

### バフ/デバフの追加方法

1. **「バフ/デバフ」セクション**の「+」ボタンをクリック
2. ダイアログの「個別追加」で以下を入力：
   - **バフ/デバフ名**：効果の名称 `例：ファイアウェポン、毒状態`
   - **効果先**：適用対象の判定・攻撃を選択
   - **簡易メモ**：補足説明 `例：炎属性ダメージ+1d6`
   - **効果**：反映させるコマンド `例：+2、+1d6、-1`
   - **ターン**：継続ターン数
   - **ラベルの色**：表示色（サンプルまたはカラーピッカーで選択）
   - **メモ**：詳細な説明や備考（入力は任意）
   - **カテゴリ**：所属するカテゴリを選択
3. 「追加」ボタンをクリック

<div class="admonition note">
  <div class="admonition-title">💡 ヒント</div>
  <div class="admonition-body">
    <p>効果先を選択する前に、反映先となる判定や攻撃を登録しておくと選択しやすいです。
  </div>
</div>

### 効果先の種類
複数選択可能
- **なし**：どの判定・攻撃にも適用しない
- **すべての判定**：登録したすべての判定に適用
- **すべての攻撃**：登録したすべての攻撃に適用
- **個別の判定/攻撃**：特定の項目のみに適用
- **カテゴリ**：カテゴリ内のすべての項目に適用（例：`>>魔法攻撃`）

---

## 判定を登録する

### 判定の追加方法

1. **「判定」セクション**の「+」ボタンをクリック
2. ダイアログの「個別追加」以下を入力：
   - **判定名**：判定の種類 `例：命中判定、知覚判定`
   - **判定ロール**：基本となるダイスロール `例：1d20、2d6+{筋力}`
   - **カテゴリ**：所属するカテゴリを選択
4. 「追加」ボタンをクリック

## 攻撃を登録する

### 攻撃の追加方法

1. **「攻撃」セクション**の「+」ボタンをクリック
3. 以下を入力：
   - **攻撃名**：攻撃の種類 `例：クレイモア、ファイアボール`
   - **攻撃ロール**：基本となるダイスロール `例：2d6、K20@10`
   - **カテゴリ**：該当する場合は選択 `例：近接攻撃、魔法攻撃`
4. 「追加」ボタンをクリック

## コマンドを生成する

### コマンド生成

1. **「判定」または「攻撃」タブ**で判定一覧から目的の項目をクリック（選択状態になる）
2. 下部の「コピペ用コマンド」欄に生成されたコマンドが表示される
3. 「コピー」ボタンでクリップボードにコピー
4. セッションツールのチャットに貼り付けて実行

<div class="admonition note">
  <div class="admonition-title">💡 コマンドハイライト</div>
  <div class="admonition-body">
    <p>生成されるコマンドの文字は対応するバフの色がついています。<br>
    読みにくい場合はマウスオーバーすると一色になり拡大表示します。
  </div>
</div>

### 目標値の設定

判定タブの「目標値」セクションで設定可能：

- **なし**：目標値なしでコマンド実行
- **>=目標値**：成功判定（例：>=10）
- **=<目標値**：失敗判定（例：=<5）

---
---

# バフ/デバフの管理機能

## バフ/デバフの有効/無効を切り替える

ラベルの右側にあるトグルボタンで有効・無効を切り替えできます。

- **有効（不透明）**：コマンド生成時に反映される
- **無効（半透明）**：コマンド生成時に無視される

---

## ターン経過

有効なバフ/デバフのターン数を進める機能です。

- **「ターン経過」ボタン**：すべての有効なバフ/デバフのターン数が1減少します
  - ターンが0になると自動的に無効になります
- **「ターンリセット」ボタン**：すべてのバフ/デバフのターンを登録時の値に戻します

<div class="admonition warning">
  <div class="admonition-title">⚠️ 途中で無効にしたバフ/デバフ</div>
  <div class="admonition-body">
    <p>無効になっているバフ/デバフのターン数は進みません。ターン経過ボタンは有効なバフ/デバフのみに影響します。
  </div>
</div>

## 順序

コマンド生成時、バフ/デバフは上から順にコマンドに反映されます。**ドラッグ操作**で順序を変更できます。

## 詳細確認

　各ラベルをクリックすると、バフ/デバフに登録されたデータを確認できます。

## 編集・削除

　各ラベルを右クリックすると、バフ/デバフの再編集または削除ができます。

---
---

# 発展的な使い方

## 変数代入機能

判定や攻撃のロール内の任意の位置にバフ/デバフの効果を代入できます。

### 使い方

**ステップ1：判定または攻撃のロール内に変数を配置**

```
例：判定ロール = 2d6+1+//ボーナス//
```

**ステップ2：バフ/デバフの効果に代入記法を使用**

```
効果：//ボーナス=+2
```

判定コマンドは以下のように生成されます

```
2d6+1+2
```

### 複数の変数を使う

1つのバフ/デバフから複数の場所に代入する場合は、「,」で区切ります：

```
バフ/デバフ：//属性ダメージ=+1d6,//ダイス増加=+1

判定ロール：(2//ダイス増加//)d6//属性ダメージ//+5
↓
生成されるコマンド：(2+1)d6+1d6+5
```

### 複数のバフ/デバフを同じ変数に代入

同じ変数を指定したバフ/デバフが複数ある場合、バフ/デバフの並び順に全て代入されます：

```
バフ/デバフ1：//攻撃力=+1d6
バフ/デバフ2：//攻撃力=+1
バフ/デバフ3：//攻撃力=-2

判定ロール：1d20+//攻撃力//
↓
生成されるコマンド：1d20+1d6+1-2
```

### 通常のコマンドと併用

代入変数コマンドと通常のコマンドも併用できます：

```
//ダイスボーナス=+1,//属性ダメージ=+5,//補足=炎属性ダメージ,+{魔力}
```

---

## カテゴリ機能

バフ/デバフ・判定・攻撃をグループ化して管理できます。

### カテゴリの追加方法

各セクション（バフ/デバフ、判定、攻撃）の「新規カテゴリ追加」で以下を入力：

```
例：戦闘判定,スキル判定,探索判定
```

#### 一括追加時のカテゴリ指定：

```
<魔法攻撃>
ファイアボール|K20@10
アイススパイク|K20@10
</魔法攻撃>

<近接攻撃>
クレイモア|2d6
```

### カテゴリの使い方

このように記述すると、自動的にカテゴリ分けされた状態で登録されます。

### カテゴリを効果先として指定

バフ/デバフの効果先で `>>カテゴリ名` を選択すると、**カテゴリ内のすべての項目**にバフ/デバフが適用されます。

```
例：
バフ/デバフ「魔法強化」の効果先 → >>魔法攻撃
↓
カテゴリ「魔法攻撃」内のすべての攻撃に「魔法強化」が適用される
```

### カテゴリへのジャンプ

一覧の上部にあるインデックスボタンで、任意のカテゴリまでスクロールをジャンプできます。

---

## メモ機能

バフ/デバフに詳細な説明や備考を記入できます。

### 簡易説明を表示

「☑簡易説明を表示」をONにすると、メモの**1行目**が一覧に表示されます。

```
メモ：
ダメージ+1d6、クリティカル時は+2
〇〇スキルによってのみ付与可能

↓ 一覧には以下のように表示
バフ/デバフ名：ダメージ+1d6、クリティカル時は+2
```

---

## ユーザー辞書とオートコンプリート

よく使う文字列をあらかじめ登録しておくと、入力時に自動でサジェストされます。

### ユーザー辞書に登録する

1. **ヘッダー**の「⚙設定」をクリック
2. 「ユーザー辞書」を選択
3. 「新規登録・編集」で以下を入力：
   - **文字列**：登録する文字列（例：+1d6,//筋力ボーナス=+2）
   - **カテゴリー**：分類用の名前（例：代入記法、よく使う効果）
4. 「登録」ボタンをクリック

<div class="admonition note">
  <div class="admonition-title">📝 カテゴリについて</div>
  <div class="admonition-body">
    <p>ユーザー辞書のカテゴリーは、登録した文字列を分類・整理する機能のみとなっています。将来的には、よく使う項目を優先的にサジェストするなど、サジェスト順位の設定機能の実装を検討しています。
  </div>
</div>

### オートコンプリートを使う

バフ/デバフのコマンド入力欄などで、以下の箇所で自動サジェストが表示されます：

- **バフ/デバフの効果欄**
- **判定ロール入力欄**
- **攻撃ロール入力欄**
- **一括追加入力欄**

入力中に該当する文字列があれば、ドロップダウンリストが表示されます。

<div class="admonition tip">
  <div class="admonition-title">📝 検索されない記号</div>
  <div class="admonition-body">
    <p>オートコンプリート機能では、記号（;:!?'"(){}[]<>|\/+*-）は無視して検索されます。
  </div>
</div>

---
---

# データの管理

データはブラウザに自動的に保存されますが、任意に保存・読込ができます。

## エクスポート（保存）

現在の設定をJSONとしてクリップボードにコピーできます。

1. **ヘッダー**の「⚙設定」→「データ管理」を選択
2. 「現在の設定をクリップボードにコピー」をクリック
3. テキストエディタなどに貼り付けて保存

---

## インポート（読み込み）

保存したJSONを読み込んで設定を復元できます。

1. **ヘッダー**の「⚙設定」→「データ管理」を選択
2. 下部の入力欄に保存したJSONを貼り付ける
3. 「このデータを読み込み」をクリック

<div class="admonition note">
  <div class="admonition-title">📝 ファイルの直接インポート</div>
  <div class="admonition-body">
    <p><code>.txt</code> または <code>.json</code> ファイルをドラッグ＆ドロップして読み込むこともできます。
  </div>
</div>

## データのリセット

すべての設定を初期化します。**この操作は取り消せません。**

1. **ヘッダー**の「⚙設定」→「データ管理」を選択
2. 「すべて初期化」をクリック
3. 確認ダイアログで「OK」を選択

---
---

# その他

## トラブルシューティング

### 生成したコマンドがダイスボットでうまく動作しない

- ✅ バフ/デバフの効果と判定または攻撃のロールで演算子（+,-など）が重複していないか確認
  - `+(+3)`や`-(+3)`は数式として破綻がないため許容されますが、`1++1`のような表記になっていると許容されません。

### コマンドが反映されない

- ✅ 判定/攻撃がリストで選択されているか確認
- ✅ バフ/デバフが無効（半透明）になっていないか確認
- ✅ 効果先の判定/攻撃が正しく指定されているか確認

### 変数が代入されない

- ✅ バフ/デバフの記法が `//変数名=値` 形式になっているか確認
- ✅ 判定/攻撃ロール内に `//変数名//` が存在するか確認
- ✅ 変数名の綴りが一致しているか確認（大文字小文字も含む）

### オートコンプリートが表示されない

- ✅ ユーザー辞書に登録した文字列があるか確認
- ✅ 入力中の文字列が登録内容と部分一致しているか確認
- ✅ 入力している文字が記号（;:!?'"(){}[]<>|\/+*-）だけではないか確認

### バフ/デバフが消えない

- ✅ バフ/デバフのトグルボタンをクリックして無効にしてください
- ✅ 完全に削除したい場合は右クリックから「削除」を選択してください

### データが保存されない

- ✅ ブラウザのストレージ容量が満杯の可能性があります
- ✅ 定期的にエクスポートでバックアップを取ることを推奨します

---
---

## よくある質問

**Q: 複数の判定に異なるバフ/デバフを適用したい**

A: バフ/デバフの効果先で複数の判定を選択してください。または、「すべての判定」を選択するか、提要死体半手または攻撃のカテゴリを選択してください。

**Q: バフ/デバフの効果を計算式の中間に挿入したい**

A: 変数代入機能を使用してください。判定/攻撃ロール内に `//変数名//` を配置し、バフ/デバフの効果に `//変数名=値` と記述します。

**Q: カテゴリ内の特定の項目だけにバフ/デバフを適用したい**

A: カテゴリではなく、個別の項目を効果先として指定してください。

**Q: ユーザー辞書のデータをバックアップしたい**

A: ヘッダーの「⚙設定」→「ユーザー辞書」から「ユーザー辞書をクリップボードにコピー」でエクスポートしてください。

---
---

## 更新履歴

<details>
  <summary>バージョン履歴</summary>
  - **v2.0.0**（2026/01/11）
  - デザインテーマの刷新
  - カラーテーマ切り替え機能を追加
  - 変数代入機能を実装
  - ユーザー辞書とオートコンプリート機能を追加
  - カテゴリ機能を実装
  - メモ・詳細表示機能を追加
  - パッケージの再編集機能を追加
  - ステータス管理機能を廃止
  - ターン管理の仕様を変更
  - 判定・攻撃セクションをタブ化
- **v1.2.1**（2025/12/24）
  - バフの一括追加で効果先「なし」を認識しない不具合を修正。
  - 一括追加を行うとテキストエリアが消失する不具合を修正。
- **v1.2.0**（2025/12/22）
  - レスポンシブデザインに対応
  - 追加フォームをポップアップダイアログに変更
  - ファイルを直接インポートする機能を追加
- **v1.1.0**（2025/12/20）
  - UI改善
  - マニュアル追加
  - フィードバックフォーム追加
  - 判定/攻撃への複数ステータス選択を追加
- **v1.0.0**（2025/12/19）
  - 初版リリース
  - バフ/デバフ管理機能
  - 判定・攻撃コマンド生成機能
  - データ管理機能（エクスポート・インポート）
</details>

---

## 今後のアップデート予定

検討段階であり、中止・変更する場合があります。

- バフ/デバフ以外のラベル（判定・攻撃）やカテゴリのカラー設定
- 複数キャラクターを同時に扱えるタブ機能
- ユーザー辞書にカラーコードのカスタム変数を登録できる機能
- JSONファイルを書き出す出力方法

---
