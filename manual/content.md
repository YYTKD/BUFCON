# JET-PALLET ユーザーマニュアル v2.0.0

---

## 概要

**JET-PALLET**（旧称BUFCON）はTRPGのオンラインセッションでの戦闘をサポートするWebツールです。

キャラクターのバフ/デバフの管理、それらを反映した判定やダメージ計算用のコマンド生成ができます。ブラウザソフトさえあればオフラインで利用できるため、どこでも使用できます。

**対応システム：** ココフォリア、ユドナリウムなどのBCDiceに対応したオンラインセッションツール

**推奨ブラウザ：**
- Google Chrome 125 以降
- Microsoft Edge 125 以降
- Firefox / Safari（一部表示が崩れる可能性があります）

## 用語について

<div class="admonition note">
  <div class="admonition-title">📝 用語について</div>
  <div class="admonition-body">
    <p>キャラクターに適用される一時的なボーナス・ペナルティのことをまとめて「<strong>バフ</strong>」と表記します。<br />
      （説明を簡潔にするため、以降は「バフ」で統一します）</p>
  </div>
</div>

## JET-PALLETでできること

✓ **バフ・デバフを登録・管理**  
└ ターン経過、有効/無効の切り替え、順序変更

✓ **判定・攻撃パターンを登録**  
└ 複数の判定・攻撃に対応

✓ **バフを反映したコマンドを自動生成**  
└ セッションツールで即実行

✓ **複雑な計算式にも対応**  
└ 変数代入機能で任意の位置に効果を挿入

---

## その他の機能

- **ユーザー辞書**：よく使う文字列を登録し、入力時のオートコンプリート機能を利用
- **カテゴリ機能**：バフ・判定・攻撃をグループ化して管理
- **データ管理**：JSONで設定の保存・読み込みが可能

---
---

# 基本的な使い方

## Step 1：バフを登録する

バフとはキャラクターに適用される一時的なボーナス・ペナルティのことです。

### バフの追加方法

1. **「バフ/デバフ」セクション**の「+」ボタンをクリック
2. ダイアログの「個別追加」で以下を入力：
   - **バフ名**：効果の名称（例：ファイアウェポン、毒状態）
   - **効果先**：適用対象の判定・攻撃を選択
   - **説明**：補足説明（例：炎属性ダメージ+1d6）
   - **効果**：反映させるコマンド（例：+2、+1d6、-1）
   - **ターン**：継続ターン数（整数値のみ）
   - **ラベルの色**：表示色（サンプルまたはカラーピッカーで選択）
   - **メモ**：詳細な説明や備考（入力は任意）
3. 「追加」ボタンをクリック

<div class="admonition note">
  <div class="admonition-title">💡 ヒント</div>
  <div class="admonition-body">
    <p>効果先を選択する前に、反映先となる判定や攻撃を登録しておくと選択しやすいです。</p>
  </div>
</div>

### バフの一括追加

複数のバフを一度に登録できます。

**記法：** `バフ名|効果先1,効果先2|説明|効果|ターン|カラーコード`

```
例：
ファイアウェポン|すべての攻撃|炎属性ダメージ|+1d6|3|#DF383E
ハイテンション|命中,武器A|命中・ダメージUP|+1|5|#F7821B
毒状態|すべての判定|-2||-|#62BA46
```

- **カテゴリ指定**：`<カテゴリ名>` で開始、`</カテゴリ名>` で終了
- **説明・効果・ターン・色は省略可能**
- 説明のみ存在する場合、「簡易説明を表示」をONにすると一覧に表示されます

### 効果先の種類

- **なし**：どの判定・攻撃にも適用しない
- **すべての判定**：登録したすべての判定に適用
- **すべての攻撃**：登録したすべての攻撃に適用
- **個別の判定/攻撃**：特定の項目のみに適用
- **カテゴリ**：カテゴリ内のすべての項目に適用（例：`>>魔法攻撃`）

---

## Step 2：判定を登録する

### 判定の追加方法

1. **「判定」タブ**を開く
2. 「+」ボタンをクリック
3. 以下を入力：
   - **判定名**：判定の種類（例：命中判定、知覚判定）
   - **判定ロール**：基本となるダイスロール（例：1d20、2d6+1）
   - **カテゴリ**：該当する場合は選択（例：戦闘判定、スキル判定）
4. 「追加」ボタンをクリック

### 判定の一括追加

**記法：** `判定名|判定ロール`

```
例：
命中判定|2d6+1
回避判定|1d20
知覚判定|2d6
```

## 変数代入を使う場合

<div class="admonition tip">
  <div class="admonition-title">📌 変数代入を使う場合</div>
  <div class="admonition-body">
    <p>判定ロール内に <code>//変数名//</code> を記述しておくと、バフから値を代入できます。<br />
      例：<code>2d6+1+//ボーナス//</code></p>
  </div>
</div>

## Step 3：攻撃を登録する

### 攻撃の追加方法

1. **「攻撃」タブ**を開く
2. 「+」ボタンをクリック
3. 以下を入力：
   - **攻撃名**：攻撃の種類（例：クレイモア、ファイアボール）
   - **攻撃ロール**：基本となるダイスロール（例：2d6、K20@10）
   - **カテゴリ**：該当する場合は選択（例：近接攻撃、魔法攻撃）
4. 「追加」ボタンをクリック

### 攻撃の一括追加

**記法：** `攻撃名|攻撃ロール`

```
例：
クレイモア|2d6
ファイアボール|K20@10
ショートボウ|1d6+2
```

## 変数代入を使う場合（攻撃）

<div class="admonition tip">
  <div class="admonition-title">📌 変数代入を使う場合</div>
  <div class="admonition-body">
    <p>判定と同様に <code>//変数名//</code> を利用できます。<br />
      例：<code>2d6+//ダメージボーナス//</code></p>
  </div>
</div>

## Step 4：コマンドを生成する

### 判定のコマンド生成

1. **「判定」タブ**で判定一覧から目的の項目をクリック（選択状態になる）
2. 下部の「コピペ用コマンド」欄に生成されたコマンドが表示される
3. 「コピー」ボタンでクリップボードにコピー
4. セッションツールのチャットに貼り付けて実行

**生成されるコマンド例：**

```
2d6+1+2 命中判定
```

#### 目標値の設定

判定タブの「目標値」セクションで設定可能：

- **なし**：目標値なしでコマンド実行
- **>=目標値**：成功判定（例：>=10）
- **=<目標値**：失敗判定（例：=<5）

### 攻撃のコマンド生成

1. **「攻撃」タブ**で攻撃一覧から目的の項目をクリック
2. 下部の「コピペ用コマンド」欄に生成されたコマンドが表示される
3. 「コピー」ボタンでクリップボードにコピー
4. セッションツールのチャットに貼り付けて実行

**生成されるコマンド例：**

```
2d6+1d6 クレイモア
```

---
---

# バフの管理機能

## バフの有効/無効を切り替える

バフ一覧の右側にあるトグルボタン（●○）で有効・無効を切り替えできます。

- **有効（青）**：ジョイント時にコマンドに反映される
- **無効（半透明）**：コマンド生成時に無視される

---

## ターン経過

アクティブなバフのターン数を進める機能です。

- **「ターン経過」ボタン**：すべてのアクティブなバフのターン数が1減少
  - ターンが0になると自動的に無効になります
- **「ターンをリセット」ボタン**：すべてのバフのターンを登録時の値に戻す

<div class="admonition warning">
  <div class="admonition-title">⚠️ 注意</div>
  <div class="admonition-body">
    <p>無効になっているバフのターン数は進みません。ターン経過ボタンは有効なバフのみに影響します。</p>
  </div>
</div>

## バフの順序を変更する

バフは上から順にコマンドに反映されます。**ドラッグ操作**で順序を変更できます。

```
例：
1. +2（先に適用）
2. +1d6
3. -1（最後に適用）
→ ダイスロール+2+1d6-1
```

<div class="admonition tip">
  <div class="admonition-title">📌 コマンドの位置が重要な場合</div>
  <div class="admonition-body">
    <p>システムによっては演算子の位置が重要な場合があります。その場合は、該当のバフを適切な位置にドラッグしてください。</p>
  </div>
</div>

## バフの再編集

<div class="admonition note">
  <div class="admonition-title">📝 機能説明</div>
  <div class="admonition-body">
    <p>この機能は <strong>近日実装予定</strong> です（v2.0.0では利用不可）</p>
    <p>一覧表示されているバフを右クリックするとメニューが表示され、バフの再編集ができるようになります。</p>
  </div>
</div>

---

# 発展的な使い方

## 変数代入機能

判定や攻撃のロール内の任意の位置にバフの効果を代入できます。

### 基本的な使い方

**ステップ1：判定（または攻撃）のロール内に変数を配置**

```
例：判定ロール = 2d6+1+//ボーナス//
```

**ステップ2：バフの効果に代入記法を使用**

```
効果：//ボーナス=+2
```

すると、判定コマンドは以下のようになります：

```
2d6+1+2
```

### 複数の変数を使う

1つのバフから複数の場所に代入する場合は、「,」で区切ります：

```
バフ効果：//ダイス増加=+1,//属性ダメージ=+1d6

判定ロール例：2d6//ダイス増加//+5//属性ダメージ//
↓
生成されるコマンド：2d6+1+5+1d6
```

### 複数のバフを同じ変数に代入

同じ変数を指定したバフが複数ある場合、バフの並び順に全て代入されます：

```
バフ1：//攻撃力=+1
バフ2：//攻撃力=+1d6
バフ3：//攻撃力=-2

判定ロール：1d20+//攻撃力//
↓
生成されるコマンド：1d20+1+1d6-2
```

<div class="admonition tip">
  <div class="admonition-title">💡 実用例</div>
  <div class="admonition-body">
    <p><strong>複雑なダメージ計算に対応</strong></p>
    <pre><code>攻撃ロール：K20@10+//力ボーナス//

バフ1（筋力アップ）：//力ボーナス==+2
バフ2（武器強化）：//力ボーナス==+1d6
</code></pre>
    <p>こうすることで、複雑な計算式を一つのコマンドで実現できます。</p>
  </div>
</div>

## ユーザー辞書とオートコンプリート

よく使う文字列をあらかじめ登録しておくと、入力時に自動でサジェストされます。

### ユーザー辞書に登録する

1. **ヘッダー**の「⚙設定」をクリック
2. 「ユーザー辞書」を選択
3. 「新規登録・編集」セクションで以下を入力：
   - **文字列**：登録する文字列（例：+1d6,//力ボーナス=+2）
   - **カテゴリー**：分類用の名前（例：代入記法、よく使う効果）
4. 「登録」ボタンをクリック

<div class="admonition note">
  <div class="admonition-title">📝 現在の機能</div>
  <div class="admonition-body">
    <p>ユーザー辞書のカテゴリーは、登録した文字列を分類・整理する機能のみとなっています。将来的には、よく使う項目を優先的にサジェストするなど、サジェスト順位の設定機能の実装を検討しています。</p>
  </div>
</div>

### オートコンプリートを使う

バフのコマンド入力欄などで、以下の箇所で自動サジェストが表示されます：

- **バフの効果欄**
- **判定ロール入力欄**
- **攻撃ロール入力欄**
- **一括追加入力欄**

入力中に該当する文字列があれば、ドロップダウンリストが表示されます。

```
入力：「+1」と打つ
↓
サジェスト例：
- +1d6
- +1d4
- //力ボーナス=+2
```

**操作方法：**

- **↑↓キー**：候補を選択
- **Enterキー**：選択した候補を確定
- **Escキー**：ドロップダウンを閉じる

---

## カテゴリ機能

バフ・判定・攻撃をグループ化して管理できます。

### カテゴリの追加方法

各セクション（バフ、判定、攻撃）の「新規カテゴリ追加」で以下を入力：

```
例：戦闘判定,スキル判定,探索判定
```

複数追加する場合はカンマで区切ります。

### カテゴリの使い方

**一括追加時のカテゴリ指定：**

```
<魔法攻撃>
ファイアボール|K20@10
アイススパイク|K20@10
</魔法攻撃>

<近接攻撃>
クレイモア|2d6
```

このように記述すると、自動的にカテゴリ分けされた状態で登録されます。

### カテゴリを効果先として指定

バフの効果先で `>>カテゴリ名` を選択すると、**カテゴリ内のすべての項目**にバフが適用されます。

```
例：
バフ「魔法強化」の効果先 → >>魔法攻撃
↓
カテゴリ「魔法攻撃」内のすべての攻撃に「魔法強化」が適用される
```

### カテゴリへのジャンプ

一覧の上部にあるインデックスボタン（📑）で、任意のカテゴリまでスクロールをジャンプできます。

---

## メモ機能

バフに詳細な説明や備考を記入できます。

### メモの記入方法

バフ追加ダイアログの「メモ欄」に自由に入力します。

```
例：
「このバフは〇〇によって付与される。
5ターン経過すると自動で解除される。
他の強化効果と重複しない。」
```

### 簡易説明を表示

「☑簡易説明を表示」をONにすると、メモの**1行目**が一覧に表示されます。

```
メモ：
ダメージ+1d6、クリティカル時は+2
〇〇スキルによってのみ付与可能

↓ 一覧には以下のように表示
バフ名：ダメージ+1d6、クリティカル時は+2
```

---

## パッケージの詳細表示

バフ一覧のバフをクリックすると、詳細情報が展開表示されます。

**表示される情報：**

- 最大ターン数
- 効果先（複数の場合は全て表示）
- コマンド内容
- メモ

---
---

# データの管理

## エクスポート（保存）

現在の設定をJSONとしてクリップボードにコピーできます。

1. **ヘッダー**の「⚙設定」→「データ管理」を選択
2. 「現在の設定をクリップボードにコピー」をクリック
3. テキストエディタなどに貼り付けて保存

---

## インポート（読み込み）

保存したJSONを読み込んで設定を復元できます。

1. **ヘッダー**の「⚙設定」→「データ管理」を選択
2. 下部の入力欄に保存したJSONを貼り付ける
3. 「このデータを読み込み」をクリック

<div class="admonition note">
  <div class="admonition-title">📝 ファイルの直接インポート</div>
  <div class="admonition-body">
    <p><code>.txt</code> または <code>.json</code> ファイルをドラッグ&amp;ドロップして読み込むこともできます。</p>
  </div>
</div>

## データのリセット

すべての設定を初期化します。**この操作は取り消せません。**

1. **ヘッダー**の「⚙設定」→「データ管理」を選択
2. 「すべて初期化」をクリック
3. 確認ダイアログで「OK」を選択

---
---

# トラブルシューティング

### コマンドが反映されない

- ✅ 判定/攻撃がリストで選択されているか確認
- ✅ バフが無効（半透明）になっていないか確認
- ✅ 効果先の判定/攻撃が正しく指定されているか確認

### 変数が代入されない

- ✅ バフの記法が `//変数名=値` 形式になっているか確認
- ✅ 判定/攻撃ロール内に `//変数名//` が存在するか確認
- ✅ 変数名の綴りが一致しているか確認（大文字小文字も含む）

### オートコンプリートが表示されない

- ✅ ユーザー辞書に登録した文字列があるか確認
- ✅ 入力中の文字列が登録内容と部分一致しているか確認

### バフが消えない

- ✅ ターン数が0になるまで「ターン経過」を実行してください
- ✅ ターン数が設定されていないバフは手動で削除してください

### データが保存されない

- ✅ ブラウザのストレージ容量が満杯の可能性があります
- ✅ 定期的にエクスポートでバックアップを取ることを推奨します

---
---

# よくある質問

**Q: 複数の判定に異なるバフを適用したい**

A: バフの効果先で複数の判定を選択してください。または、「すべての判定」を選択して、適用しない判定は別途バフを削除してください。

**Q: バフの効果を計算式の中間に挿入したい**

A: 変数代入機能を使用してください。判定/攻撃ロール内に `//変数名//` を配置し、バフの効果に `//変数名=値` と記述します。

**Q: カテゴリ内の特定の項目だけにバフを適用したい**

A: カテゴリではなく、個別の項目を効果先として指定してください。

**Q: ユーザー辞書のデータをバックアップしたい**

A: ヘッダーの「⚙設定」→「ユーザー辞書」から「ユーザー辞書をクリップボードにコピー」でエクスポートしてください。

**Q: オフラインで使用できますか？**

A: はい。ローカルアプリのため、ソースファイルをダウンロードした場合はオフラインでも使用できます。

**Q: 複数キャラクターの設定を切り替えたい**

A: 現在の設定をエクスポート→別のキャラクター用の設定をインポート、という方法で切り替えてください。

---
---

## 更新履歴

<details>
  <summary>バージョン履歴</summary>
</details>

- **v2.0.0**（2025/XX/XX）
  - 変数代入機能を実装
  - ユーザー辞書とオートコンプリート機能を追加
  - カテゴリ機能を実装
  - メモ・詳細表示機能を追加
  - パッケージの再編集機能を追加（実装予定）
  - ステータス管理機能を廃止
  - ターン管理の仕様を変更（非アクティブなバフはターン経過の影響を受けなくなった）
  - 判定・攻撃セクションをタブ化
- **v1.2.0**（2025/12/XX）
  - レスポンシブデザインに対応
  - 追加フォームをポップアップダイアログに変更
  - ファイルを直接インポートする機能を追加
- **v1.1.0**（2025/12/XX）
  - UI改善
  - マニュアル追加
  - フィードバックフォーム追加
- **v1.0.0**（2025/12/XX）
  - 初版リリース
  - バフ/デバフ管理機能
  - 判定・攻撃コマンド生成機能
  - データ管理機能（エクスポート・インポート）

---

## 今後のアップデート予定

検討段階であり、中止・変更する場合があります。

- バフ以外のラベル（判定・攻撃）のカラー設定
- 複数キャラクターを同時に扱えるタブ機能
- ユーザー辞書にカラーコードのカスタム変数を登録できる機能
- JSONファイルを書き出す出力方法

---

<div class="footer">
  ※ このHTMLは、提供された Markdown から生成された静的ページです（外部通信なし）。
</div>
